<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/pets"></ion-back-button>
    </ion-buttons>
    <ion-title>Pet Details</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="dots"></ion-spinner>
    <p>Loading pet details...</p>
  </div>
  
  <div *ngIf="!loading && !pet" class="empty-state">
    <ion-icon name="alert-circle-outline"></ion-icon>
    <h3>Pet not found</h3>
    <p>The pet you're looking for doesn't exist or has been removed</p>
    <ion-button routerLink="/tabs/pets" expand="block" fill="clear">
      Browse Other Pets
    </ion-button>
  </div>
  
  <div *ngIf="!loading && pet" class="pet-detail-container">
    <div class="pet-image-container">
      <img [src]="pet.imageUrl || 'assets/pet-placeholder.svg'" alt="{{ pet.name }}" class="pet-image">
      <div class="status-badge" [ngClass]="pet.status">{{ pet.status }}</div>
    </div>
    
    <div class="pet-info-container">
      <h1 class="pet-name">{{ pet.name }}</h1>
      <p class="pet-breed">{{ pet.breed || pet.species }}</p>
      
      <div class="pet-attributes">
        <div class="attribute">
          <ion-icon name="calendar-outline"></ion-icon>
          <span>{{ pet.age || 'Unknown' }} {{ pet.age === 1 ? 'year' : 'years' }}</span>
        </div>
        
        <div class="attribute">
          <ion-icon name="male-female-outline"></ion-icon>
          <span>{{ pet.gender || 'Unknown' }}</span>
        </div>
        
        <div class="attribute">
          <ion-icon name="paw-outline"></ion-icon>
          <span>{{ pet.species }}</span>
        </div>
      </div>
      
      <div class="pet-description">
        <h3>About {{ pet.name }}</h3>
        <p>{{ pet.description || 'No description available for this pet.' }}</p>
      </div>
      
      <div class="adoption-info" *ngIf="pet.status === 'available'">
        <h3>Adoption Information</h3>
        <p>
          {{ pet.name }} is currently available for adoption! If you're interested in providing 
          a loving home for {{ pet.name }}, please submit an adoption application.
        </p>
      </div>
      
      <div class="adoption-info" *ngIf="pet.status === 'adopted'">
        <h3>Adoption Information</h3>
        <p>
          {{ pet.name }} has already found their forever home! Please check our other 
          pets available for adoption.
        </p>
      </div>
      
      <div class="adoption-info" *ngIf="pet.status === 'pending'">
        <h3>Adoption Information</h3>
        <p>
          {{ pet.name }} has pending adoption applications. If you're interested, you can 
          still contact us to express interest in case current applications don't work out.
        </p>
      </div>
      
      <div class="action-buttons">
        <ion-button expand="block" color="primary" (click)="openAdoptionModal()" 
                    *ngIf="pet.status === 'available' && !hasApplied">
          <ion-icon name="heart" slot="start"></ion-icon>
          Apply to Adopt
        </ion-button>
        
        <ion-button expand="block" color="success" disabled *ngIf="hasApplied">
          <ion-icon name="checkmark" slot="start"></ion-icon>
          Application Submitted
        </ion-button>
        
        <ion-button expand="block" color="secondary" (click)="contactShelter()">
          <ion-icon name="chatbubble" slot="start"></ion-icon>
          Contact About {{ pet.name }}
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
